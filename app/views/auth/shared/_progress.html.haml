- progress_index = { rules: 0, details: 1, confirm: 2, phone: 3, enable: 4 }[stage.to_sym]

%ol.progress-tracker
  %li{ class: progress_index.positive? ? 'completed' : 'active' }
    .circle
      - if progress_index.positive?
        = check_icon
    .label= t('auth.progress.rules')
  %li.separator{ class: progress_index.positive? ? 'completed' : nil }
  %li{ class: [progress_index > 1 && 'completed', progress_index == 1 && 'active'] }
    .circle
      - if progress_index > 1
        = check_icon
    .label= t('auth.progress.details')
  %li.separator{ class: progress_index > 1 ? 'completed' : nil }
  %li{ class: [progress_index > 2 && 'completed', progress_index == 2 && 'active'] }
    .circle
      - if progress_index > 2
        = check_icon
    .label= t('auth.progress.confirm')
  %li.separator{ class: progress_index > 2 ? 'completed' : nil }
  %li{ class: [progress_index > 3 && 'completed', progress_index == 3 && 'active'] }
    .circle
      - if progress_index > 3
        = check_icon
    .label= "Confirm phone"
  %li.separator{ class: progress_index > 3 ? 'completed' : nil }
  %li{ class: [progress_index > 4 && 'completed', progress_index == 4 && 'active'] }
    .circle
      - if progress_index > 4
        = check_icon
    .label= "Enable 2FA"
  - if approved_registrations?
    %li.separator{ class: progress_index > 4 ? 'completed' : nil }
    %li
      .circle
      .label= t('auth.progress.review')
